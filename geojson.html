<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

		<title>REST Endpoint GeoJSON Demo</title>
		<meta name="description" content="A brief tutorial on using REST endpoints, with Esri services as demonstrations." />
		<meta name="author" content="Mike Dolbow" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<!-- Replace favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
		integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
		crossorigin=""/>
		<link rel="stylesheet" href="css/app.css">
		<link rel="stylesheet" href="css/skeleton.css">
		<script src="//code.jquery.com/jquery-2.1.0.min.js"></script>
		<script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
		integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
		crossorigin=""></script>
		<script src="//cdn.rawgit.com/calvinmetcalf/leaflet-ajax/master/dist/leaflet.ajax.min.js"></script>
		<script src="js/geojson.js"></script>
	</head>

	<body onload="initgeojsonmap();">
		<div>
			<!-- Try to figure out how to do he nav better -->
			<nav>
				<ul>
					<li><a href="./index.html">Home</a></li>
					<li><a href="./browse.html">Explore with a Browser</a></li>
					<li><a href="./queries.html">Building Queries</a></li>
					<li><a href="./pnpdemo.html">Point-in-Poly Demo</a></li>
					<li><a href="./">Get GeoJSON</a></li>
				</ul>
			</nav>
	<header>
		<h1>REST Endpoint GeoJSON Demo</h1>
	</header>
			<div>
			<p>
				<a href="http://www.json.org/">JSON</a>, or Javascript Object Notation, has long been a common format for modern web applications using
				<a href="https://en.wikipedia.org/wiki/Ajax_(programming)">AJAX methodologies</a> to dynamically display data.
				Recent years have seen an extension of this format into geography, called
				<a href="http://geojson.org/">GeoJSON</a>, providing web developers with a lightweight, open format that is easily
				parsed by Javascript and shown on simple maps. The format proved so popular that in 2014 Google Maps began supporting it,
				as did Esri in <a href="https://blogs.esri.com/esri/arcgis/2014/12/16/arcgis-online-geojson/">ArcGIS Online (AGOL) REST endpoints</a>. (<a href="http://d3.d3.opendata.arcgis.com/datasets/46321d4eac7c436d858ba64870c91075_0">Here's an example.</a>) As of version 10.4,
				you can request GeoJSON as a format from Esri services authored in ArcGIS Server. If you're working with an Esri-flavored endpoint that is older than that, you can leverage
				open Javascript libraries such as <a href="http://terraformer.io/arcgis-parser/">this one from Terraformer</a> to convert their original version of JSON-with-geometry to GeoJSON.
				</p>
			<p>Below we're attempting to take this in a few directions. First, we utilize data from the USGS's <a href="https://eerscmap.usgs.gov/uswtdb/">Wind Turbine Database</a>, which has a non-Esri API, but also <a href="https://eerscmap.usgs.gov/arcgis/rest/services/uswtdb/uswtdbDyn/MapServer/0">an ArcGIS Server endpoint</a>.
				Then, we're trying to use advice from <a href="http://lyzidiamond.com/posts/external-geojson-and-leaflet-the-other-way">Lyzi Diamond</a>
				and <a href="https://github.com/calvinmetcalf/leaflet-ajax">a plugin from Calvin Metcalf</a>, or just jQuery $.getJSON, so we can add
				that dataset with a bounding-box query of the layer, setting the output format to GeoJSON. (You'll only find this format in the HTML query form if it's available.)
				Right now we're still trying to get this to work - hook us up a pull request if you can figure out what's going wrong!
				</p>
			<p>All this  is overlain on the Esri imagery web map tile service. If you zoom in on some of the records, you will usually see the wind turbine!</p>
			</div>
			<div id="map"></div>
			<div id="footer">
				<p>
					&copy; <a href="./license.md">Copyright</a> by Mike Dolbow, <a href="http://twitter.com/mmdolbow">twitter.com/mmdolbow</a>.
				</p>
			</div>
		</div>
	</body>
</html>
